<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">  <!-- 添加这一行 -->
    <title>生成小程序二维码</title>
</head>
<body>
<h2>生成设备绑定二维码</h2>

<div>
    <label>设备ID：</label>
    <input type="text" id="deviceId" placeholder="请输入设备ID">
    <button onclick="generateQr()">生成二维码</button>
</div>

<div id="qrContainer" style="margin-top: 20px;">
    <img id="qrImage" style="max-width: 300px;">
</div>

<script>
    function generateQr() {
        const deviceId = document.getElementById('deviceId').value;
        if (!deviceId) {
            alert('请输入设备ID');
            return;
        }

        // 直接显示二维码图片
        const img = document.getElementById('qrImage');
        img.src = `/api/qrcode/device?deviceId=${deviceId}&t=${Date.now()}`;
        console.log("qr src:", img.src);
    }
</script>
</body>
</html>